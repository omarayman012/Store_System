<!-- Bootstrap RTL + Icons (إن لم تكن مضمّنة) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

<style>
    /* زر إضافة صف (من الرد السابق) */
    .add-row-btn {
        --size: 42px;
        width: var(--size);
        height: var(--size);
        border: none;
        border-radius: 50%;
        display: grid;
        place-items: center;
        font-size: 1.1rem;
        color: #fff;
        background-image: linear-gradient(135deg, #28c76f, #00b894);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        transition: transform .25s ease, box-shadow .25s ease;
        cursor: pointer;
    }

        .add-row-btn:hover {
            transform: scale(1.12);
            box-shadow: 0 6px 14px rgba(0,0,0,.2);
        }

        .add-row-btn:active {
            transform: scale(.95);
        }

    /* زر الحذف */
    .delete-row-btn {
        border: none;
        background: none;
        color: #dc3545; /* أحمر bootstrap */
        font-size: 1.2rem;
        cursor: pointer;
        transition: transform .2s ease;
    }

        .delete-row-btn:hover {
            transform: scale(1.2);
        }

        .delete-row-btn:active {
            transform: scale(.9);
        }
</style>


<div class="mt-5">
    <div id="personal-info" class="shadow">
        <span class="bg-color">  تعديل مستند مخرج  </span>
        <div class="row">
            <div class="col-sm-12 col-md-3 mt-4">
                <label class="form-label"> رقم المستند</label>
                <input class="form-control" disabled required />
            </div>

            <div class="col-sm-12 col-md-3 mt-4">
                <label class="form-label"> تاريخ المستند</label>
                <input class="form-control" type="date" disabled required />
            </div>
        </div>
        <hr />
        <h3 class="text-center my-3">تعديل مواد</h3>
        <table class="table table-striped align-middle">
            <thead class="text-center">
                <tr>
                    <th>#</th>
                    <th>اسم المادة</th>
                    <th>الكود</th>
                    <th style="width:600px">التفاصيل</th>
                    <th>
                        <!-- زر إضافة صف -->
                        <button id="addRowBtn" class="add-row-btn" title="إضافة صف جديد">
                            <i class="bi bi-plus-lg"></i>
                        </button>
                    </th>
                </tr>
            </thead>

            <tbody id="subjectsBody">
                <tr>
                    <td class="row-index">1</td>

                    <td>
                        <select name="subjectName" class="form-select" required>
                            <option value="" selected disabled>اختر اسم المادة...</option>
                            <option value="arabic">اللغة العربية</option>
                            <option value="english">اللغة الإنجليزية</option>
                            <option value="math">الرياضيات</option>
                            <option value="science">العلوم</option>
                            <option value="history">التاريخ</option>
                            <!-- أضف المزيد حسب حاجتك -->
                        </select>
                    </td>

                    <td>
                        <input type="text" name="subjectCode" class="form-control" placeholder="كود المادة" required>
                    </td>

                    <td>
                        <textarea name="subjectDetails" class="form-control" placeholder="أضف تفاصيل المادة"></textarea>
                    </td>

                    <!-- عمود زر الحذف (فارغ للصف الأول) -->
                    <td></td>
                </tr>
            </tbody>
        </table>
        <div class="col-sm-12 mt-2">
            <input type="submit" class="form-control color-btn" value="حفظ" />
        </div>

    </div>



</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const tbody = document.getElementById('subjectsBody');
    const addBtn = document.getElementById('addRowBtn');

    // إنشاء زر حذف جديد
    function createDeleteButton() {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'delete-row-btn';
      btn.innerHTML = '<i class="bi bi-trash-fill"></i>';
      btn.title = 'حذف الصف';
      // حدث الحذف
      btn.addEventListener('click', () => {
        btn.closest('tr').remove();
        renumberRows();
      });
      return btn;
    }

    // إعادة ترقيم العمود الأول بعد أي إضافة/حذف
    function renumberRows() {
      [...tbody.rows].forEach((tr, idx) => tr.querySelector('.row-index').textContent = idx + 1);
    }

    // إضافة صف جديد
    addBtn.addEventListener('click', () => {
      const templateRow = tbody.rows[0];           // الصف الأول كنموذج
      const newRow = templateRow.cloneNode(true);

      // مسح القيم
      newRow.querySelectorAll('input, textarea').forEach(el => el.value = '');

      // إضافة زر حذف إن لم يكن موجودًا
      let deleteCell = newRow.lastElementChild;
      deleteCell.innerHTML = '';                   // تفريغ الخلية
      deleteCell.appendChild(createDeleteButton());

      tbody.appendChild(newRow);
      renumberRows();
    });
</script>




